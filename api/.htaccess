<IfModule mod_headers.c>

    # Voor CORS → enkel voor vault/api calls
    # TOEGESTAAN van:
    # - localhost (voor development)
    # - www.xinudesign.be (voor productie)
    SetEnvIf Origin "^http(s)?://(localhost:5173|www\.xinudesign\.be)$" CORS_ALLOWED_ORIGIN=$0

    Header always set Access-Control-Allow-Origin %{CORS_ALLOWED_ORIGIN}e env=CORS_ALLOWED_ORIGIN
    Header always set Access-Control-Allow-Credentials true
    Header always set Access-Control-Allow-Headers "Content-Type, Authorization"
    Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"

    # Zorg dat Authorization header wél doorkomt in PHP
SetEnvIf Authorization "(.*)" HTTP_AUTHORIZATION=$1


    # Speciale handling voor preflight OPTIONS → antwoorden met 200 OK en de juiste headers
    RewriteEngine On
    RewriteCond %{REQUEST_METHOD} OPTIONS
    RewriteRule ^(.*)$ $1 [R=200,L]

</IfModule>
